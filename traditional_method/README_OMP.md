# OMP-based ASCæå–å™¨ä½¿ç”¨æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†åŸºäº**æ­£äº¤åŒ¹é…è¿½è¸ª(Orthogonal Matching Pursuit, OMP)**ç®—æ³•çš„æ•£å°„ä¸­å¿ƒæå–å™¨ï¼Œç”¨äºä»MSTAR SARæ•°æ®é›†ä¸­è‡ªåŠ¨æå–æ•£å°„ä¸­å¿ƒå‚æ•°ã€‚è¯¥å®ç°åŸºäº[scikit-learnçš„å®˜æ–¹OMPå®ç°](https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.OrthogonalMatchingPursuit.html)ï¼Œç»“åˆSARæˆåƒç‰©ç†æ¨¡å‹ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- âœ… **ç§‘å­¦ä¸¥è°¨**: åŸºäºscikit-learnå®˜æ–¹OMPå®ç°ï¼Œç¡®ä¿ç®—æ³•æ­£ç¡®æ€§
- âœ… **ç‰©ç†å»ºæ¨¡**: é›†æˆSARæˆåƒç‰©ç†æ¨¡å‹ï¼Œæ”¯æŒå¤æ•°æ•°æ®å¤„ç†
- âœ… **å¤šé…ç½®æ–¹æ¡ˆ**: æä¾›6ç§é¢„è®¾é…ç½®ï¼Œé€‚åº”ä¸åŒåº”ç”¨åœºæ™¯
- âœ… **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤§è§„æ¨¡æ•°æ®é›†çš„æ‰¹é‡å¤„ç†å’Œæ€§èƒ½æ¯”è¾ƒ
- âœ… **å¯è§†åŒ–åˆ†æ**: ä¸°å¯Œçš„ç»“æœå¯è§†åŒ–å’Œè´¨é‡è¯„ä¼°å·¥å…·
- âœ… **æ ¼å¼å…¼å®¹**: æ”¯æŒMATå’ŒRAWæ ¼å¼æ•°æ®çš„è¾“å…¥è¾“å‡º

## ğŸ—ï¸ ç®—æ³•åŸç†

### OMPç¨€ç–æ¢å¤åŸç†

æ­£äº¤åŒ¹é…è¿½è¸ªç®—æ³•é€šè¿‡è´ªå¿ƒç­–ç•¥é€æ­¥é€‰æ‹©æœ€ç›¸å…³çš„å­—å…¸åŸå­æ¥é‡æ„ç¨€ç–ä¿¡å·ï¼š

1. **å­—å…¸æ„å»º**: é¢„è®¡ç®—ä¸åŒä½ç½®å’Œå‚æ•°çš„æ•£å°„ä¸­å¿ƒå“åº”æ¨¡æ¿
2. **ç¨€ç–æ±‚è§£**: ä½¿ç”¨OMPç®—æ³•å¯»æ‰¾æœ€ä¼˜ç¨€ç–è¡¨ç¤º
3. **å‚æ•°æå–**: ä»ç¨€ç–ç³»æ•°ä¸­æ¢å¤æ•£å°„ä¸­å¿ƒå‚æ•°

### SARæˆåƒæ¨¡å‹

åŸºäºASC (Attributed Scattering Center) æ¨¡å‹ï¼š

```
E(fx,fy) = A * (jf/fc)^Î± * exp(-j4Ï€f/c * (x*cos(Î¸) + y*sin(Î¸)))
```

å…¶ä¸­ï¼š
- `A`: æ•£å°„å¹…åº¦
- `Î±`: é¢‘ç‡ä¾èµ–ç›¸ä½å‚æ•°  
- `(x,y)`: æ•£å°„ä¸­å¿ƒä½ç½®
- `(fx,fy)`: é¢‘ç‡åæ ‡

## ğŸ“ é¡¹ç›®ç»“æ„

```
traditional_method/
â”œâ”€â”€ omp_asc_extractor.py    # æ ¸å¿ƒOMPæå–å™¨ç±»
â”œâ”€â”€ omp_config.py           # é…ç½®ç®¡ç†ç³»ç»Ÿ
â”œâ”€â”€ batch_omp_processor.py  # æ‰¹é‡å¤„ç†å·¥å…·
â”œâ”€â”€ README_OMP.md          # æœ¬è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ omp_results/           # è¾“å‡ºç»“æœç›®å½•
â””â”€â”€ batch_results/         # æ‰¹é‡å¤„ç†ç»“æœ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…ï¼š

```bash
pip install scikit-learn numpy scipy matplotlib pandas tqdm seaborn
```

### 2. æ•°æ®é¢„å¤„ç†

é¦–å…ˆè¿è¡ŒMATLABé¢„å¤„ç†è„šæœ¬ï¼š

```matlab
cd script/dataProcess
run step1_MSTAR2mat.m      % MSTAR -> MAT
run step2_MSTAR_mat2raw.m  % MAT -> RAW + JPG
```

### 3. åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

```python
from traditional_method.omp_asc_extractor import OMPASCExtractor

# åˆå§‹åŒ–æå–å™¨
extractor = OMPASCExtractor(
    img_size=(128, 128),
    search_region=(-6.4, 6.4, -6.4, 6.4),  # æœç´¢åŒºåŸŸ(ç±³)
    grid_resolution=0.2,                     # ç½‘æ ¼åˆ†è¾¨ç‡(ç±³)
    n_nonzero_coefs=20,                     # æœ€å¤§æ•£å°„ä¸­å¿ƒæ•°
    cross_validation=False                   # æ˜¯å¦äº¤å‰éªŒè¯
)

# ä»MATæ–‡ä»¶æå–ASC
asc_list = extractor.extract_asc_from_mat('path/to/file.mat')

# ä»RAWæ–‡ä»¶æå–ASC  
asc_list = extractor.extract_asc_from_raw('path/to/file.raw')

# ä¿å­˜ç»“æœ
extractor.save_results(asc_list, 'output.mat')

# å¯è§†åŒ–ç»“æœ
extractor.visualize_results(original_img, asc_list, 'result.png')
```

### 4. è¿è¡Œæ¼”ç¤ºç¨‹åº

```bash
cd traditional_method
python omp_asc_extractor.py
```

## âš™ï¸ é…ç½®æ–¹æ¡ˆè¯¦è§£

é¡¹ç›®æä¾›6ç§é¢„è®¾é…ç½®ï¼Œé€‚åº”ä¸åŒçš„åº”ç”¨éœ€æ±‚ï¼š

### ğŸ“Š é…ç½®å¯¹æ¯”è¡¨

| é…ç½®åç§° | ç½‘æ ¼åˆ†è¾¨ç‡ | æœ€å¤§æ•£å°„ä¸­å¿ƒæ•° | äº¤å‰éªŒè¯ | é€‚ç”¨åœºæ™¯ |
|---------|------------|---------------|----------|----------|
| `debug` | 0.8m | 5 | âŒ | å¿«é€Ÿè°ƒè¯•éªŒè¯ |
| `fast` | 0.4m | 15 | âŒ | æ‰¹é‡å¿«é€Ÿå¤„ç† |
| `standard` | 0.2m | 20 | âŒ | å¸¸è§„åˆ†æä»»åŠ¡ |
| `sparse` | 0.15m | 10 | âŒ | å¼ºæ•£å°„ä¸­å¿ƒæå– |
| `dense` | 0.1m | 35 | âœ… | è¯¦ç»†ç‰¹å¾åˆ†æ |
| `high_precision` | 0.1m | 25 | âœ… | ç§‘ç ”ç²¾ç¡®åˆ†æ |

### ä½¿ç”¨é…ç½®ç³»ç»Ÿ

```python
from traditional_method.omp_config import get_config, list_available_configs

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é…ç½®
list_available_configs()

# è·å–ç‰¹å®šé…ç½®
config = get_config('standard')

# ä½¿ç”¨é…ç½®åˆå§‹åŒ–æå–å™¨
omp_params = config['omp_params']
extractor = OMPASCExtractor(
    search_region=omp_params['search_region'],
    grid_resolution=omp_params['grid_resolution'],
    n_nonzero_coefs=omp_params['n_nonzero_coefs'],
    cross_validation=omp_params['cross_validation']
)
```

## ğŸ”„ æ‰¹é‡å¤„ç†

### åŸºæœ¬æ‰¹é‡å¤„ç†

```python
from traditional_method.batch_omp_processor import BatchOMPProcessor

# åˆå§‹åŒ–æ‰¹é‡å¤„ç†å™¨
processor = BatchOMPProcessor()

# å¤„ç†å¤šä¸ªé…ç½®æ–¹æ¡ˆ
results = processor.batch_process(
    config_names=['fast', 'standard', 'high_precision'],
    max_files=20,
    parallel=False
)
```

### æ‰¹é‡å¤„ç†åŠŸèƒ½

- **å¤šé…ç½®æ¯”è¾ƒ**: åŒæ—¶è¿è¡Œå¤šç§é…ç½®æ–¹æ¡ˆ
- **æ€§èƒ½åˆ†æ**: è‡ªåŠ¨ç”Ÿæˆå¤„ç†æ—¶é—´ã€æˆåŠŸç‡ç­‰ç»Ÿè®¡
- **è´¨é‡è¯„ä¼°**: è®¡ç®—é‡å»ºRMSEã€ç›¸å…³ç³»æ•°ç­‰æŒ‡æ ‡
- **å¯è§†åŒ–æŠ¥å‘Š**: ç”Ÿæˆå¯¹æ¯”å›¾è¡¨å’Œåˆ†ææŠ¥å‘Š

## ğŸ“ˆ ç»“æœåˆ†æ

### è¾“å‡ºæ ¼å¼

#### 1. ASCå‚æ•°åˆ—è¡¨
æ¯ä¸ªæ£€æµ‹åˆ°çš„æ•£å°„ä¸­å¿ƒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š
```python
{
    'x': 2.16,      # Xåæ ‡ (ç±³)
    'y': 0.38,      # Yåæ ‡ (ç±³) 
    'alpha': 0.5,   # é¢‘ç‡ä¾èµ–ç›¸ä½å‚æ•°
    'A': 2.65,      # æ•£å°„å¹…åº¦
    'gamma': 0,     # ä¿¯ä»°è§’ä¾èµ–å‚æ•°
    'phi_prime': 0, # ç›¸ä½å‚æ•°
    'L': 0          # é•¿åº¦å‚æ•°
}
```

#### 2. è´¨é‡æŒ‡æ ‡
```python
{
    'relative_rmse': 0.234,    # ç›¸å¯¹é‡å»ºè¯¯å·®
    'correlation': 0.856       # é‡å»ºç›¸å…³ç³»æ•°
}
```

### å¯è§†åŒ–è¾“å‡º

æ¯æ¬¡å¤„ç†ä¼šç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„å¯è§†åŒ–å›¾åƒï¼š
- **åŸå§‹SARå›¾åƒ**: è¾“å…¥çš„SARå¹…åº¦å›¾åƒ
- **æ£€æµ‹ç»“æœå åŠ **: ASCä½ç½®æ ‡è®°åœ¨åŸå›¾ä¸Š
- **é‡å»ºå›¾åƒ**: åŸºäºæå–çš„ASCé‡å»ºçš„å›¾åƒ  
- **è¯¯å·®åˆ†æ**: åŸå›¾ä¸é‡å»ºå›¾çš„å·®å€¼

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰é…ç½®

```python
# åˆ›å»ºè‡ªå®šä¹‰é…ç½®
custom_extractor = OMPASCExtractor(
    img_size=(128, 128),
    search_region=(-8.0, 8.0, -8.0, 8.0),  # æ‰©å¤§æœç´¢åŒºåŸŸ
    grid_resolution=0.1,                     # ç²¾ç»†ç½‘æ ¼
    alpha_range=(-3.0, 3.0),                # æ‰©å¤§AlphaèŒƒå›´
    n_nonzero_coefs=30,                     # æ›´å¤šæ•£å°„ä¸­å¿ƒ
    cross_validation=True                    # å¯ç”¨äº¤å‰éªŒè¯
)
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å†…å­˜ä¼˜åŒ–**: 
   - å‡å°ç½‘æ ¼åˆ†è¾¨ç‡å¯æ˜¾è‘—é™ä½å†…å­˜ä½¿ç”¨
   - é™åˆ¶æœç´¢åŒºåŸŸèŒƒå›´

2. **é€Ÿåº¦ä¼˜åŒ–**:
   - ä½¿ç”¨'fast'é…ç½®è¿›è¡Œåˆæ­¥åˆ†æ
   - å…³é—­äº¤å‰éªŒè¯å¯æé«˜é€Ÿåº¦
   - é¢„è®¡ç®—å­—å…¸ä»¥å¤ç”¨

3. **ç²¾åº¦ä¼˜åŒ–**:
   - ä½¿ç”¨'high_precision'é…ç½®
   - å¯ç”¨äº¤å‰éªŒè¯è‡ªåŠ¨é€‰æ‹©ç¨€ç–åº¦
   - å¢åŠ Alphaå‚æ•°ç¦»æ•£åŒ–æ­¥æ•°

## ğŸ“Š æ€§èƒ½åŸºå‡†

åŸºäºMSTARæ•°æ®é›†çš„å…¸å‹æ€§èƒ½æŒ‡æ ‡ï¼š

| é…ç½® | å¤„ç†æ—¶é—´ | æ£€æµ‹æ•°é‡ | é‡å»ºRMSE | å†…å­˜ä½¿ç”¨ |
|------|----------|----------|----------|----------|
| debug | ~10s | 3-8ä¸ª | ~0.4 | <100MB |
| fast | ~30s | 8-15ä¸ª | ~0.3 | ~200MB |
| standard | ~60s | 12-20ä¸ª | ~0.25 | ~500MB |
| high_precision | ~180s | 15-25ä¸ª | ~0.2 | ~1GB |

*æ³¨ï¼šæ€§èƒ½æ•°æ®åŸºäºIntel i7 CPUï¼Œå®é™…æ€§èƒ½å¯èƒ½å› ç¡¬ä»¶é…ç½®è€Œå¼‚*

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### Q1: å†…å­˜ä¸è¶³é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: 
- ä½¿ç”¨æ›´ç²—çš„ç½‘æ ¼åˆ†è¾¨ç‡ (>0.3m)
- å‡å°æœç´¢åŒºåŸŸèŒƒå›´
- é™ä½Alphaå‚æ•°ç¦»æ•£åŒ–æ­¥æ•°

### Q2: æ£€æµ‹ä¸åˆ°æ•£å°„ä¸­å¿ƒ
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥è¾“å…¥æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
- è°ƒæ•´ç¨€ç–åº¦å‚æ•°(n_nonzero_coefs)
- æ‰©å¤§æœç´¢åŒºåŸŸæˆ–å‡å°ç½‘æ ¼åˆ†è¾¨ç‡

### Q3: å¤„ç†é€Ÿåº¦è¿‡æ…¢  
**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨'fast'é…ç½®è¿›è¡Œå¿«é€Ÿé¢„å¤„ç†
- å…³é—­äº¤å‰éªŒè¯é€‰é¡¹
- é™åˆ¶æœ€å¤§æ•£å°„ä¸­å¿ƒæ•°é‡

### Q4: é‡å»ºè´¨é‡è¾ƒå·®
**è§£å†³æ–¹æ¡ˆ**:
- å¢åŠ æ£€æµ‹çš„æ•£å°„ä¸­å¿ƒæ•°é‡
- ä½¿ç”¨æ›´ç²¾ç»†çš„ç½‘æ ¼åˆ†è¾¨ç‡
- è°ƒæ•´Alphaå‚æ•°èŒƒå›´

## ğŸ“š å‚è€ƒæ–‡çŒ®

1. Mallat, S. & Zhang, Z. (1993). "Matching pursuits with time-frequency dictionaries." IEEE Transactions on Signal Processing, 41(12), 3397-3415.

2. Tropp, J. A. & Gilbert, A. C. (2007). "Signal recovery from random measurements via orthogonal matching pursuit." IEEE Transactions on Information Theory, 53(12), 4655-4666.

3. Gerry, M. J., Potter, L. C. & Gupta, I. J. (1997). "A parametric model for synthetic aperture radar measurements." IEEE Transactions on Antennas and Propagation, 45(7), 1148-1158.

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°æŠ€æœ¯é—®é¢˜æˆ–éœ€è¦åŠŸèƒ½æ‰©å±•ï¼Œè¯·ï¼š

1. æ£€æŸ¥æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
2. æŸ¥çœ‹ä»£ç æ³¨é‡Šä¸­çš„è¯¦ç»†è¯´æ˜  
3. è¿è¡Œæ¼”ç¤ºç¨‹åºéªŒè¯ç¯å¢ƒé…ç½®
4. è”ç³»é¡¹ç›®å›¢é˜Ÿè·å–æŠ€æœ¯æ”¯æŒ

---

*æœ¬å®ç°ä¸¥æ ¼åŸºäºscikit-learnå®˜æ–¹OMPç®—æ³•ï¼Œç¡®ä¿äº†ç®—æ³•çš„ç§‘å­¦æ€§å’Œå¯é æ€§ã€‚é€‚ç”¨äºSARå›¾åƒåˆ†æã€ç›®æ ‡è¯†åˆ«ã€é›·è¾¾ä¿¡å·å¤„ç†ç­‰é¢†åŸŸçš„ç ”ç©¶å’Œåº”ç”¨ã€‚* 